# 第一章：分布式架构

## 分布式的特点

### 定义
**分布式系统是一个硬件或软件组件分布在不同的网络计算机上，彼此之间仅仅通过消息传递和协调的系统**

### 特征

* 分布性 
* 对等性：没有主从之分，副本（replica），分布式系统对数据喝服务提供的一种冗余方式。
* 并发性
* 缺乏全局时钟
* 故障总会发生

### 问题
* 通信异常
```
通信设备不稳定、延时大于单机操作。
```
* 网络分区
```
部分节点延时过大，最终导致只有小部分节点能正常通信，使得出现分区即“脑裂”。极端情况下，最终只有小集群去支撑整个系统。
```
* 三态
```
由于以上种种原因，导致每一次请求与响应都有三种状态：成功、失败与超时。
```
* 节点故障

## 从ACID到CAP／BASE

事务（transaction）：对系统中数据进行访问与更新的操作所组成的一个程序执行逻辑单元。具有四个特性：
* 原子性（Atomicity）
```
指事务必须是一个原子的操作序列单元。只允许出现以下两种状态：
1、全部执行成功
2、全部不执行
```

* 一致性（consistency）
```
指事务的执行不能破坏数据库数据的完整性和一致性。
```
 
* 隔离行（Isolation）
```
并发情况下，一个事务的执行不能被其他事务干扰。
1、read uncommited：允许脏读。
2、read commited：只允许读提交了的数据。
3、repeatable read：多次读取同一个数据，其值和事务开始前一致。
4、serializable：串行化。所有事务只能串行执行。
```

* 持久性（duration）
```

```